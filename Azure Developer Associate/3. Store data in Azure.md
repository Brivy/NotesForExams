# Store data in Azure

This is the third chapter of the online Azure Developer Associate course.

## Choose a data storage approach in Azure

The key factors to consider in deciding on the optimal storage solution are: how to classify your data, how your data will be used, and how you can get the best performance for your application.

### Classify the data

**Structured data**, sometimes referred to as *relational data*, is data that adheres to a strict schema, so all of the data has the same fields or properties. This type of data can be searched with SQL.

**Semi-structured** (also referred to as *NoSQL*) data is less organized than structured data, and is not stored in a relational format, as the fields do not neatly fit into tables, rows, and columns. The expression and structure of the data in this style is defined by a *serialization language*.
Data serialization languages are important because they can be used to write data stored in memory to a file, sent to another system (that uses the same language), parsed and read. There are three of those languages:

- XML (extensible markup language)
- JSON (JavaScript Object Notation)
- YAML (YAML Ainâ€™t Markup Language)

**Unstructured data** is often delivered in files, such as photos or videos. The video file itself may have an overall structure and come with semi-structured metadata, but the data that comprises the video itself is unstructured. Some examples:

- Media files, such as photos, videos, and audio files
- Office files, such as Word documents
- Text files
- Log files

When choosing the type of data, you can ask yourself one of these questions:

- Will you be doing simple lookups using an ID?
- Do you need to query the database for one or more fields?
- How many create, update, and delete operations do you expect?
- Do you need to run complex analytical queries?
- How quickly do these operations need to complete?

### Data transactions

A transaction is a logical group of database operations that execute together. Transactions are often defined by a set of four requirements, referred to as ACID guarantees. ACID stands for:

- **Atomicity** means a transaction must execute exactly once and must be atomic; either all of the work is done, or none of it is. Operations within a transaction usually share a common intent and are interdependent.
- **Consistency** ensures that the data is consistent both before and after the transaction.
- **Isolation** ensures that one transaction is not impacted by another transaction.
- **Durability** means that the changes made due to the transaction are permanently saved in the system. Committed data is saved by the system so that even in the event of a failure and system restart, the data is available in its correct state.

Transactional databases are often called **OLTP** (Online Transaction Processing) systems. OLTP systems commonly support lots of users, have quick response times, handle large volumes of data and are highly available but handle small/simple transactions.
There are also **OLAP** (Online Analytical Processing) systems, but they commonly support fewer users, have longer response times, can be less available, and typically handle large and complex transactions.

### Determine which service is best for the data type

Semi-structured data that requires a high number of reads and writes (high throughput and low latency) should use **Azure Cosmos DB**. This also has transactional support (ACID-compliant) for when it's needed. Data replication is also supported around the world by a single click, based on your consistency level (a tradeoff between consistency, availability, latency, and throughput)
One thing to note is that other Azure services such as Azure Table storage, Azure HBase as a part of HDInsight, and Azure Cache for Redis, can also store NoSQL data. But if you want to query on multiple fields, Azure Cosmos DB is a better fit because it indexes every field by default. Other services are limited in the data they index, and querying on non-indexed fields results in reduced performance.

Unstructured data that requires retrieval by ID, a high number of read operations with a low latency, but for the create/update a higher latency than read operations should use **Azure Blob storage**. Because this service can work with Azure Content Delivery Network (CDN), it can reduce the latency for serving the files.
Other options are to upload the files to the Azure App Services so that the same server that is running your app is serving up your images. But this solution only works if you don't have many files.

Structured data that we all know and love can make use of **Azure SQL Database**. Another service is for example Azure Synapse. It supports OLAP solutions and SQL queries but no cross-database queries.

Some extra stuff about BI databases:

- Azure Stream Analytics can be used in addition to Azure SQL Database. But you need to use Power BI instead of SQL.
- Azure Analyses Services is a great way to analyze data and transform it into actionable insights, but its focus is on real-time data that is streaming in. If you need historical data only, you don't need it.

## Create an Azure Storage account

Most organizations have diverse requirements for their cloud-hosted data. For example, storing data in a specific region, or needing separate billing for different data categories. Azure storage accounts let you formalize these types of policies and apply them to your Azure data.

### Azure storage explained

While you have a lot of services inside Azure that can store stuff, there are four services selected to be under the name of **Azure Storage**:

![Cool picture](Pictures/2-azure-storage.png)

A **storage account** is a container that groups a set of Azure Storage services together. The settings you specify when you create the account, or any that you change after creation, are applied to everything in the account. Deleting the storage account deletes all of the data stored inside it. A group can for example look like this:

![Cool picture](Pictures/2-what-is-a-storage-account.png)

While a storage account is an Azure resource and is included in a resource group, other services like Azure SQL and Azure Cosmos DB are managed as independent Azure resources. See the following example:

![Cool picture](Pictures/2-typical-subscription-organization.png)

Settings here..
